default_stages: [commit]

repos:
  - repo: local
    hooks:
      # File-aware format hook - only runs on changed Python files
      - id: format-files
        name: Format Changed Files
        stages: [commit]
        language: system
        types: [python]
        entry: uv run ruff check --fix
        pass_filenames: true

      # File-aware lint hook - only runs on changed Python files
      - id: lint-files
        name: Lint Changed Files
        stages: [commit]
        language: system
        types: [python]
        entry: uv run ruff check
        pass_filenames: true

      # Conditional template hook - only runs when template files change
      - id: template
        name: Build Templates
        stages: [commit]
        language: system
        files: ^infra/templates/|\.jinja2$
        entry: make build-templates
        pass_filenames: false
